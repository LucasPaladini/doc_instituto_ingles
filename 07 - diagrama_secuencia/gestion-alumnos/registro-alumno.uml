@startuml
actor Administrador

participant "ca: ControladorAlumno" as CA
participant "cda: <Singleton> CatálogoDeAlumnos" as CatA
participant "alum[i]: Alumno" as A
participant "alumno: Alumno" as Al

== Registro de alumno ==
Administrador -> CA : registrar_alumno(alumno_id, datos)
activate CA

CA -> CatA : buscar_alumno(alumno_id)
activate CatA

loop para cada alumno en CatálogoDeAlumnos
  
    CatA -> A : getId()
    activate A
    A --> CatA : <<id : alumno_id>>
      note right of CatA
        Si id = alumno_id
        alumno ya registrado  
        cortar iteración
    end note
    deactivate A
end

CatA --> CA : <<alumno_encontrado (boolean)>>
deactivate CatA

alt Alumno no encontrado
    CA -> Al : crear_alumno(datos)
    activate Al
    Al --> CA : <<alumno creado>>
    deactivate Al

    CA -> CatA : agregar_alumno(datos)
    activate CatA
    CatA --> CA : <<confirmación registro (boolean)>>
    deactivate CatA

    CA --> Administrador : <<confirmación registro (boolean)>>
else Alumno ya existente
    CA --> Administrador : <<mensaje de error>>
end

deactivate CA
@enduml

